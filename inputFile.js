// Generated by CoffeeScript 1.12.1
(function() {
  var CacheImage, imageList, webFile, whenInputFiles;

  CacheImage = spexif.CacheImage;

  imageList = spexif.imageList;

  webFile = {
    read: function(file, callback) {
      var reader;
      reader = new FileReader();
      reader.onload = callback;
      return reader.readAsDataURL(file);
    },
    newCacheImage: function(evt) {
      return imageList.add(evt.target.result);
    }
  };

  whenInputFiles = function(evt) {
    var file, files, i, len, results;
    files = evt.target.files;
    results = [];
    for (i = 0, len = files.length; i < len; i++) {
      file = files[i];
      results.push(webFile.read(file, webFile.newCacheImage));
    }
    return results;
  };

  (document.getElementsByTagName('input'))[0].addEventListener('change', whenInputFiles, true);

}).call(this);

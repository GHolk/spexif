
fs = require 'fs'

router = Object.create null

router.error = (res) ->
    res.writeHead 404, {'Content-Type': 'text/html'}
    fs.createReadStream('404.html').pipe res

router['/'] = router['/index.html'] = (res) ->
    res.writeHead 200, {'Content-Type': 'text/html'}
    fs.createReadStream('index.html').pipe res


route = (res, pathname, query) ->
    if typeof router[pathname] == 'function'
        router[pathanme] res, query



// Generated by CoffeeScript 1.12.1
(function() {
  var fs, i, len, ref, route, routeFileType, router, scriptFile;

  fs = require('fs');

  router = Object.create(null);

  routeFileType = function(pathname, httpCode, contentType) {
    return function(res) {
      res.writeHead(httpCode, {
        'Content-Type': contentType
      });
      fs.createReadStream(pathname).pipe(res);
      return console.log("send " + pathname);
    };
  };

  router.error = routeFileType('404.txt', 404, 'text/plain');

  router['/index.html'] = routeFileType('index.html', 200, 'text/html');

  router['/ext/style.css'] = routeFileType('ext/style.css', 200, 'text/css');

  router['/'] = router['/index.html'];

  ref = ['cacheImage.js', 'domHelper.js', 'errorSpeaker.js', 'filterPiexif.js', 'googleMapWraper.js', 'imageList.js', 'inputFile.js', 'piexif.js'];
  for (i = 0, len = ref.length; i < len; i++) {
    scriptFile = ref[i];
    router["/ext/" + scriptFile] = routeFileType("ext/" + scriptFile, 200, 'application/javascript');
  }

  route = function(res, pathname, query) {
    if (typeof router[pathname] === 'function') {
      console.log("route to " + pathname);
      return router[pathname](res, query);
    } else {
      console.log("no route, to 404.txt");
      return router.error(res);
    }
  };

  exports.route = route;

}).call(this);
